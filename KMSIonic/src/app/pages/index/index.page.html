<ion-header>
  <ion-item-divider class="ion-no-padding">
    <ion-toolbar>
      <ion-buttons slot="start">
        <ion-menu-button></ion-menu-button>
      </ion-buttons>
      <ion-searchbar routerLink="/search-users" routerDirection="forward">
      </ion-searchbar>
    </ion-toolbar>
  </ion-item-divider>
</ion-header>

<ion-content>
  <ion-item-divider class="ion-no-padding">
    <ion-toolbar>
      <ion-avatar slot="start" style="width: 40px; height: 40px;" *ngIf="loggedInUser" class="ion-margin-start">
        <img *ngIf="loggedInUser.profilePicture" class="ion-border" [src]="loggedInUser.profilePicture"
          alt="User profile picture">
        <img *ngIf="!loggedInUser.profilePicture" class="ion-border"
          src="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png"
          alt="User profile picture">
      </ion-avatar>
      <ion-button [routerLink]="['/create-post/user']" fill="outline" expand="full" shape="round" color="medium"
        class="ion-margin" size="default">
        <span style="margin-right: auto; margin-top: 3px; color: black; font-size: 0.8em">What's on
          your
          mind?</span>
      </ion-button>
    </ion-toolbar>
  </ion-item-divider>
  <ion-card *ngFor="let post of newsfeedPosts">
    <ion-item lines="none">
      <ion-avatar slot="start" class="ion-margin-start">
        <img *ngIf="loggedInUser.profilePicture" class="ion-border" [src]="loggedInUser.profilePicture"
          alt="User profile picture">
        <img *ngIf="!loggedInUser.profilePicture" class="ion-border"
          src="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png"
          alt="User profile picture">
      </ion-avatar>
      <ion-grid fixed>
        <ion-row>
          <ion-col size="12">
            <ion-card-title>{{loggedInUser.firstName}} {{loggedInUser.lastName}}</ion-card-title>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col size="12">
            <ion-card-subtitle>{{post.postDate | date}}</ion-card-subtitle>
          </ion-col>
        </ion-row>
      </ion-grid>
      <ion-icon name="ellipsis-horizontal-outline" slot="end" (click)="postActionSheet(post.postId)"></ion-icon>
    </ion-item>
    <ion-card-content>
      {{post.text}}
    </ion-card-content>
    <img [src]="post.picture" *ngIf="post.picture" />
    <ion-item-divider class="ion-no-padding">
      <ion-badge slot="start" class="ion-no-margin ion-margin-start">
        <ion-icon name="thumbs-up"></ion-icon>
      </ion-badge>
      <ion-label style="margin-left: 5px;">{{post.likers.length}}</ion-label>
      <ion-label slot="end" class="ion-text-end ion-margin-end" color="medium">{{post.comments.length}} comments
      </ion-label>
    </ion-item-divider>
    <ion-grid class="ion-no-padding" style="height: 100%;">
      <ion-row style="height: 100%;">
        <ion-col *ngIf="!userHaveLikedPost(post.postId)" size="4" class="ion-text-center ion-activatable ion-padding"
          (click)="like(post.postId)">
          <ion-icon name="thumbs-up-outline"></ion-icon> Like
          <ion-ripple-effect></ion-ripple-effect>
        </ion-col>
        <ion-col *ngIf="userHaveLikedPost(post.postId)" size="4" class="ion-text-center ion-activatable ion-padding"
          (click)="removeLikeForPost(post.postId)">
          <ion-icon name="thumbs-up"></ion-icon> Liked
          <ion-ripple-effect></ion-ripple-effect>
        </ion-col>
        <ion-col size="4" class="ion-text-center ion-activatable ion-padding"
          (click)="showPostCommentModal(post.postId)">
          <ion-icon name="chatbox-outline"></ion-icon> Comment
          <ion-ripple-effect></ion-ripple-effect>
        </ion-col>
        <ion-col size="4" class="ion-text-center ion-activatable ion-padding" (click)="share(post.postId)">
          <ion-icon name="arrow-redo-outline"></ion-icon> Share
          <ion-ripple-effect></ion-ripple-effect>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-card>

</ion-content>