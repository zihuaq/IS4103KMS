<ion-card>
  <ion-card-content>
    <ion-item>
      <ion-avatar slot="start">
        <img *ngIf="profile.profilePicture" class="profile-user-img img-fluid img-circle" [src]="profile.profilePicture"
          alt="User profile picture">
        <img *ngIf="!profile.profilePicture"
          src="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png"
          alt="User profile picture">
      </ion-avatar>
      <ion-label>
        <h3> {{profile.firstName}} {{profile.lastName}} </h3>
        <p class="text-muted text-center"> {{profile.email}} </p>
      </ion-label>
    </ion-item>
    <ion-item>
      <ion-label>
        <p>Followers </p>
        <ion-note>
          <a [routerLink]="['/searchUsers/followers/']"> {{profile.followers.length}} </a>
        </ion-note>
      </ion-label>
      <ion-label>
        <p>Following </p>
        <ion-note>
          <a [routerLink]="['/searchUsers/following/']"> {{profile.following.length}} </a>
        </ion-note>
      </ion-label>
    </ion-item>
    <ion-item  *ngIf="profile.userId != loggedInUser.userId" class="ion-text-wrap">
      <ion-label *ngIf="profile.userId != loggedInUser.userId">
        <ion-button fill="outline" *ngIf="!isFollowing && !hasSentFollowRequest" (click)="follow()" class="ion-text-wrap ion-no-margin">
          Follow
        </ion-button>
        <ion-button *ngIf="isFollowing" (click)="unfollow()" class="ion-text-wrap ion-no-margin"> Unfollow </ion-button>
        <ion-button *ngIf="!isFollowing && hasSentFollowRequest" disabled=true class="ion-text-wrap ion-no-margin">
          <i class="fas fa-check"></i>
          Follow Request Sent
        </ion-button>
      </ion-label>
      <ion-label>
        <ion-button fill="outline"
          *ngIf="!(loggedInUser.userType != UserType.INSTITUTE && profile.userType != UserType.INSTITUTE) && !isAffiliated && !hasSentAffiliationRequest"
          (click)="sendAffiliationRequest()" class="ion-text-wrap ion-no-margin">
          Send Affiliation Request
        </ion-button>
        <ion-button *ngIf="isAffiliated" (click)="removeAffiliation()" class="ion-text-wrap ion-no-margin"> Remove Affiliation </ion-button>
        <ion-button *ngIf="!isAffiliated && hasSentAffiliationRequest" disabled=true class="ion-text-wrap ion-no-margin">
          <i class="fas fa-check"></i>
          Affiliation Request Sent
        </ion-button>
      </ion-label>
    </ion-item>
    <ion-item>
      <ion-buttons>
        <ion-button slot="start" class="ion-text-wrap ion-text-start ion-no-margin" routerLink="/view-basic-info/{{profile.userId}}">
          <ion-icon name="ellipsis-horizontal-outline"></ion-icon>
          See more information about {{profile.firstName}} {{profile.lastName}}
        </ion-button>
      </ion-buttons>
    </ion-item>
  </ion-card-content>
</ion-card>