<ion-header>
  <ion-toolbar>
    <ion-title style="font-size: medium;">Add Material Resource</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="dismiss()">Close</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content >
  <form (ngSubmit)="createMra(mraForm)" #mraForm="ngForm">
    <ion-item-group>
      <ion-item>
        <ion-label position="stacked">Material Resource Name</ion-label>
        <ion-input type="text" id="mraName" [ngModel]="newMra.name" name="mraName" disabled></ion-input>
      </ion-item>
      <ion-item>
        <ion-label position="stacked"> Quantity *</ion-label>
        <ion-input type="number" id="quantity" [(ngModel)]="newMra.quantity" name="quantity" required></ion-input>
      </ion-item>
      <ion-item>
        <ion-label position="stacked"> Units</ion-label>
        <ion-input type="text" [ngModel]="newMra.units" name="units" disabled></ion-input>
      </ion-item>
      <ion-item>
        <ion-label position="stacked">Description</ion-label>
        <ion-input type="text" id="description" [(ngModel)]="newMra.description" name="description"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label position="stacked" style="margin-bottom: 5px;">Material Resource Tags</ion-label>
        <ion-list>
          <ion-item *ngFor="let tag of newMra.tags" lines="none">
            <ion-chip>
              <ion-label style="font-size: small;">{{tag.name}} </ion-label>
            </ion-chip>
          </ion-item>
        </ion-list>
      </ion-item>
      <ion-item>
        <ion-label position="stacked">Location of Resource</ion-label>
      </ion-item>
      <div id="map_canvas">
      </div>
      <ion-item>
        <ion-label position="stacked">Latitude *</ion-label>
        <ion-input type="text" id="latitude" [(ngModel)]="newMra.latitude" name="latitude" required>
        </ion-input>
      </ion-item>
      <ion-item>
        <ion-label position="stacked">Longitude *</ion-label>
        <ion-input type="text" id="longitude" [(ngModel)]="newMra.longitude" name="longitude" required>
        </ion-input>
      </ion-item>
      <ion-item>
        <ion-label position="stacked">Does your resource expire?</ion-label>
        <ion-toggle [(ngModel)]="hasExpiry" name="hasExpiry" (change)="handleHasExpiryChange()"></ion-toggle>
      </ion-item>
      <ion-item *ngIf="hasExpiry">
        <ion-label position="stacked">Start Date (DD/MM/YYYY):</ion-label>
        <ion-datetime name="startDate" placeholder="DD/MM/YYYY" [min]="minDate" display-format="DD/MM/YYYY" [(ngModel)]="startDate" required>
        </ion-datetime>
      </ion-item>
      <ion-item *ngIf="hasExpiry">
        <ion-label position="stacked">End Date (DD/MM/YYYY):</ion-label>
        <ion-datetime name="endDate" placeholder="DD/MM/YYYY" [min]="startDate" display-format="DD/MM/YYYY" [(ngModel)]="endDate" required>
        </ion-datetime>
      </ion-item>
    </ion-item-group>
    <ion-button type="submit" expand="block">Submit</ion-button>
  </form>
</ion-content>
