<ion-header>
  <ion-toolbar>
      <ion-buttons slot="start">
          <ion-back-button></ion-back-button>
        </ion-buttons>
    <ion-title>Forget password</ion-title>
  </ion-toolbar>
</ion-header>
<ion-content>
<div class="container">
    <div class="row">
        <div class="col-xs-12 col-sm-10 col-md-8 col-sm-offset-1 col-md-offset-2">
          <div class="alert alert-danger" *ngIf = "requestSentError">
            <p>{{ errorMessage }}</p>
          </div>
          <div class="alert alert-success" *ngIf = "requestSent">
            <p>{{ successMessage }}</p>
          </div>
          <div>
            <p>Please provide a registered email address. Then new password will be sent to this address</p>
          </div>
          <hr>
          <div *ngIf ='isLoading' style="text-align: center;">
            <app-loading-spinner></app-loading-spinner>
          </div>
            <form (ngSubmit)="getNewPassword(forgotPasswordForm)" #forgotPasswordForm="ngForm">
              
              <div class="form-group">
                <ion-item>
                <ion-label for="email">Email Address</ion-label>
                <ion-input type="email" id="email" class="form-control" ngModel name="email" required email
                    #email="ngModel"></ion-input>
                <span class="help-block" *ngIf="!email.valid && email.touched">Please enter a valid email!</span>
            </ion-item>
              </div>
              <hr>
            <div>
              <ion-button href="/login">Login</ion-button>

              <ion-button class="btn btn-primary" type="submit" style="float: right;"
                [disabled]="!forgotPasswordForm.valid"(click)="presentAlert()">
                Get new Password
              </ion-button>
            </div>
            </form>
            <div *ngIf = "requestSent">
              <p>New Password Sent! Please check your email!</p>
            </div>
        </div>
    </div>
</div>
</ion-content>