<!-- Profile Image -->
<div class="card card-primary card-outline">
  <div class="card-body box-profile">
    <div class="text-center">
      <img *ngIf="profile.profilePicture" class="profile-user-img img-fluid img-circle" [src]="profile.profilePicture"
        alt="User profile picture">
      <img *ngIf="!profile.profilePicture" class="profile-user-img img-fluid img-circle"
        src="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png"
        alt="User profile picture">
    </div>

    <h3 class="profile-username text-center">{{profile.firstName}} {{profile.lastName}}</h3>

    <p class="text-muted text-center">{{profile.email}}</p>

    <ul class="list-group list-group-unbordered mb-3">
      <li class="list-group-item" *ngIf="isPublic() || isFollowing || profile.userId == loggedInUser.userId">
        <b>Followers</b> <a class="float-right"
          [routerLink]="['/searchUsers/followers/', profile.userId]">{{profile.followers.length}}</a>
      </li>
      <li class="list-group-item" *ngIf="isPublic() || isFollowing || profile.userId == loggedInUser.userId">
        <b>Following</b> <a class="float-right"
          [routerLink]="['/searchUsers/following/', profile.userId]">{{profile.following.length}}</a>
      </li>
      <li class="list-group-item" *ngIf="!isPublic() && !isFollowing && profile.userId != loggedInUser.userId">
        <b>Followers</b> <a class="float-right">{{profile.followers.length}}</a>
      </li>
      <li class="list-group-item" *ngIf="!isPublic() && !isFollowing && profile.userId != loggedInUser.userId">
        <b>Following</b> <a class="float-right">{{profile.following.length}}</a>
      </li>
      <li class="list-group-item" *ngIf="isPublic() || isFollowing || profile.userId == loggedInUser.userId">
        <b *ngIf="profile.userType == UserType.INSTITUTE">Affiliated Individuals</b> 
        <b *ngIf="profile.userType != UserType.INSTITUTE">Affiliated Institutes</b> 
        <a class="float-right"
          [routerLink]="['/searchUsers/affiliated/', profile.userId]"> {{profile.affiliatedUsers.length}}</a>
      </li>
      <li class="list-group-item" *ngIf="!isPublic() && !isFollowing && profile.userId != loggedInUser.userId">
        <b *ngIf="profile.userType == UserType.INSTITUTE">Affiliated Individuals</b> 
        <b *ngIf="profile.userType != UserType.INSTITUTE">Affiliated Institutes</b> 
        <a class="float-right"> {{profile.affiliatedUsers.length}}</a>
      </li>
      <li class="list-group-item">
        <b>Reputation points</b> <a class="float-right">{{profile.reputationPoints}}</a>
      </li>
    </ul>
    <div *ngIf="profile.userId != loggedInUser.userId">
      <a class="btn btn-primary btn-block" *ngIf="!isFollowing && !hasSentFollowRequest"
        (click)="follow()"><b>Follow</b></a>
      <a class="btn btn-primary btn-block" *ngIf="isFollowing" (click)="unfollow()"><b>Unfollow</b></a>
      <a class="btn bg-gradient-info btn-block" *ngIf="!isFollowing && hasSentFollowRequest" disabled=true>
        <i class="fas fa-check"></i> Follow Request Sent
      </a>
      <a class="btn btn-primary btn-block" *ngIf="!isAffiliated && !hasSentAffiliationRequest"
        (click)="sendAffiliationRequest()"><b>Send Affiliation Request</b></a>
      <a class="btn btn-primary btn-block" *ngIf="isAffiliated" (click)="removeAffiliation()"><b>Remove Affiliation</b></a>
      <a class="btn bg-gradient-info btn-block" *ngIf="!isAffiliated && hasSentAffiliationRequest" disabled=true>
        <i class="fas fa-check"></i> Affiliation Request Sent
      </a>
    </div>
  </div>
  <!-- /.card-body -->
</div>
<!-- /.card -->